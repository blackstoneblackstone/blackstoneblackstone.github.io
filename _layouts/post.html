---
layout: default
---
{% assign author = site.authors[page.author] %}
<div class="container">
<div class="jumbotron jumbotron-fluid mb-3 pl-0 pt-0 pb-0 bg-white position-relative">
		<div class="h-100 tofront">
			<div class="row {% if page.image %} justify-content-between {% else %} justify-content-center {% endif %}">
				<div class="{% if page.image %} col-md-12 {% else %} col-md-8 {% endif %} pr-0 pr-md-4 pt-4 pb-4 align-self-center">
					<p class="text-uppercase font-weight-bold">
                        <span class="catlist">
						{% for category in page.categories %}
                          <a class="sscroll text-danger" href="{{site.baseurl}}/categories.html#{{ category | downcase }}">{{ category | downcase }}</a><span class="sep">, </span>
                        {% endfor %}
                        </span>
					</p>
					<h1 class="display-4 mb-4 article-headline">{{ page.title }}</h1>
				</div>
			</div>
		</div>
	</div>
</div>





<div class="container pt-4 pb-4">
	<div class="row">
        
        <!-- 文章内容区域 -->
		<div class="col-md-9 col-lg-9">
            
            <!-- 面包屑导航 -->
            <nav aria-label="breadcrumb" class="mb-4">
                <ol class="breadcrumb" style="background-color: transparent; padding: 0;" itemscope itemtype="https://schema.org/BreadcrumbList">
                    <li class="breadcrumb-item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
                        <a href="{{ site.baseurl }}/" itemprop="item">
                            <span itemprop="name">首页</span>
                        </a>
                        <meta itemprop="position" content="1" />
                    </li>
                    <li class="breadcrumb-item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
                        <a href="{{ site.baseurl }}/categories.html" itemprop="item">
                            <span itemprop="name">分类</span>
                        </a>
                        <meta itemprop="position" content="2" />
                    </li>
                    {% for category in page.categories %}
                    <li class="breadcrumb-item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
                        <a href="{{ site.baseurl }}/categories.html#{{ category | downcase }}" itemprop="item">
                            <span itemprop="name">{{ category }}</span>
                        </a>
                        <meta itemprop="position" content="{{ forloop.index | plus: 2 }}" />
                    </li>
                    {% endfor %}
                    <li class="breadcrumb-item active" aria-current="page" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
                        <span itemprop="name">{{ page.title }}</span>
                        <meta itemprop="position" content="{{ page.categories.size | plus: 3 }}" />
                    </li>
                </ol>
            </nav>
            
            <!-- Article -->
			<article class="article-post" id="article-content">                
			{{ content }}                
			</article>
			
			<!-- Tags -->
			<div class="mb-4">
				<span class="taglist">
				{% for tag in page.tags %}
				  <a class="sscroll btn btn-light btn-sm font-weight-bold" href="{{site.baseurl}}/tags.html#{{ tag | downcase }}">{{ tag | downcase }}</a>
				{% endfor %}
				</span>
			</div>
 
             <!-- Author Box -->
                {% if page.author %}				
				<div class="row mt-5">
					<div class="col-md-2 align-self-center">
                         {% if author.avatar %}
                        <img class="rounded-circle" src="{{site.baseurl}}/{{author.avatar}}" alt="{{author.name}}" width="90"/>
                        {% endif %} 
					</div>
				</div>				
                {% endif %}
            
            <!-- Comments -->
            {% if page.comments != false %}
                {% include comments.html %}
            {% endif %}
            
		</div>
        
        <!-- 文章大纲侧边栏 -->
        <div class="col-md-3 col-lg-3 d-none d-lg-block">
            <div class="sticky-top" style="top: 20px;">
                <div class="card">
                    <div class="card-header">
                        <h6 class="mb-0">文章大纲</h6>
                    </div>
                    <div class="card-body">
                        <nav id="toc" class="toc">
                            <!-- 大纲内容将通过 JavaScript 生成 -->
                        </nav>
                    </div>
                </div>
            </div>
        </div>
        
	</div>
</div>


<!-- Aletbar Prev/Next -->
<div class="alertbar">
    <div class="container">
        <div class="row prevnextlinks small font-weight-bold">
          {% if page.previous.url %}
            <div class="col-md-6 rightborder pl-0">
                <a class="text-dark" href="{{ site.baseurl }}{{ page.previous.url }}">{% if page.previous.image %} <img height="30px" class="mr-1" src="{% if page.previous.image contains 'http' %}{{page.previous.image}}{% else %}{{site.baseurl}}/{{page.previous.image}}{% endif %}"> {% endif %} {{page.previous.title}}</a>
            </div>
          {% endif %}
          {% if page.next.url %}
            <div class="col-md-6 text-right pr-0">
                <a class="text-dark" href="{{ site.baseurl }}{{ page.next.url }}"> {{page.next.title}} {% if page.next.image %} <img height="30px" class="ml-1" src="{% if page.next.image contains 'http' %}{{page.next.image}}{% else %}{{site.baseurl}}/{{page.next.image}}{% endif %}"> {% endif %}</a>
            </div>
          {% endif %}
        </div>
    </div>
</div>

<!-- 文章大纲生成脚本 -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    // 生成文章大纲
    function generateTOC() {
        const article = document.getElementById('article-content');
        const toc = document.getElementById('toc');
        
        if (!article || !toc) return;
        
        // 获取所有标题
        const headings = article.querySelectorAll('h1, h2, h3, h4, h5, h6');
        
        if (headings.length === 0) {
            toc.innerHTML = '<p class="text-muted small">暂无大纲</p>';
            return;
        }
        
        let tocHTML = '<ul class="list-unstyled">';
        let currentLevel = 0;
        
        headings.forEach((heading, index) => {
            const level = parseInt(heading.tagName.charAt(1));
            const id = 'heading-' + index;
            heading.id = id;
            
            // 添加锚点链接
            const anchor = document.createElement('a');
            anchor.href = '#' + id;
            anchor.className = 'text-decoration-none';
            anchor.innerHTML = heading.textContent;
            heading.innerHTML = '';
            heading.appendChild(anchor);
            
            // 生成大纲结构
            if (level > currentLevel) {
                tocHTML += '<ul class="list-unstyled ml-3">'.repeat(level - currentLevel);
            } else if (level < currentLevel) {
                tocHTML += '</ul>'.repeat(currentLevel - level);
            }
            
            tocHTML += `<li class="mb-1">
                <a href="#${id}" class="text-decoration-none small" style="color: #6c757d;">
                    ${heading.textContent}
                </a>
            </li>`;
            
            currentLevel = level;
        });
        
        // 关闭未闭合的 ul 标签
        tocHTML += '</ul>'.repeat(currentLevel);
        tocHTML += '</ul>';
        
        toc.innerHTML = tocHTML;
        
        // 添加平滑滚动
        toc.querySelectorAll('a').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            });
        });
    }
    
    // 高亮当前阅读的标题
    function highlightCurrentHeading() {
        const headings = document.querySelectorAll('#article-content h1, #article-content h2, #article-content h3, #article-content h4, #article-content h5, #article-content h6');
        const tocLinks = document.querySelectorAll('#toc a');
        
        if (headings.length === 0 || tocLinks.length === 0) return;
        
        let currentHeading = null;
        
        headings.forEach(heading => {
            const rect = heading.getBoundingClientRect();
            if (rect.top <= 100) {
                currentHeading = heading;
            }
        });
        
        // 移除所有高亮
        tocLinks.forEach(link => {
            link.style.color = '#6c757d';
            link.style.fontWeight = 'normal';
        });
        
        // 高亮当前标题
        if (currentHeading) {
            const currentLink = document.querySelector(`#toc a[href="#${currentHeading.id}"]`);
            if (currentLink) {
                currentLink.style.color = '#007bff';
                currentLink.style.fontWeight = 'bold';
            }
        }
    }
    
    // 初始化
    generateTOC();
    
    // 监听滚动事件
    window.addEventListener('scroll', highlightCurrentHeading);
});
</script>
